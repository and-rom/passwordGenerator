<script>
  function handleClick(){
    form = document.form;
    inputs = form.getElementsByTagName('input');
    values = {};
    string = "";
    for (i = 0; i < inputs.length; ++i) {
      switch (inputs[i].getAttribute("type")) {
        case "number":
          string += inputs[i].getAttribute("name") + "=" + inputs[i].value;
          break;
        case "checkbox":
          string += inputs[i].getAttribute("name") + "=" + (inputs[i].checked ? "1" : "0");
          break
        default:
          continue;
      }
      string += "&";
      xmlhttp.open("GET","passwordGenerator.php?"+string,true);
      xmlhttp.send();
    }
  }



var xmlhttp;

if (window.XMLHttpRequest) {
  // code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
} else {
  // code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function() {
  if (xmlhttp.readyState==4 && xmlhttp.status==200) {
    var data = xmlhttp.responseText;
    //var data = eval("(" + xmlhttp.responseText + ")");
    document.getElementById("passwords").innerHTML = data;
  }
}

document.addEventListener('keyup', function(event){
                                     if (event.ctrlKey && event.keyCode == 13) {
                                       var selection = window.getSelection().toString();;
                                       console.log(selection.length);
                                       if (selection.length > 120) {
                                         alert("Вы выбрали слишком большой объем текста!");
                                       } else {
                                         var form = document.createElement("form");
                                         form.setAttribute("method", "post");
                                         form.setAttribute("action", "mistakes.php");

                                         var hiddenField = document.createElement("input");
                                         hiddenField.setAttribute("type", "hidden");
                                         hiddenField.setAttribute("name", "mistake");
                                         hiddenField.setAttribute("value", selection);

                                         form.appendChild(hiddenField);
                                         document.body.appendChild(form);
                                         form.submit();
                                       }
                                     }
                                   }, false);


</script>
<form name="form" id="form-0">
  <fieldset>
    <legend>Параметры генерации паролей</legend>
    <input id="passwordsCount" name="passwordsCount" type="number" value="10" min="1" max="50" />
    <label for="passwordsCount">Количество создаваемых паролей</label>
    <br />
    <input id="wordsCount" name="wordsCount" type="number" value="5" min="3" max="5" />
    <label for="wordsCount">Количество слов во фразе</label>

    <br />
    <input id="digitsCount" name="digitsCount" type="number" value="2" min="0" max="4" />
    <label for="digitsCount">Количество цифр в начале фразы</label>

    <br />
    <input id="charactersCount" name="charactersCount" type="number" value="3" min="3" max="4" />
    <label for="charactersCount">Количество букв из каждого слова</label>

    <br />
    <label for="upperCaseLetter"><input type="checkbox" name="upperCaseLetter" id="upperCaseLetter-0">Использовать заглавные буквы в начале слов</label>
    <br />

    <input type="button" id="generate" onclick="handleClick()" value="Создать пароли">
  </fieldset>
</form>
<div id="passwords"></div>
